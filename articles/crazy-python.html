<!DOCTYPE html>
<html lang="en">
<head>
	<title>Crazy Python | Jakub Tes√°rek</title>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Crazy stuff you can do in Python">

	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

	<link rel="stylesheet" href="/style/main.css">

	<script src="/script/setup.js"></script>
</head>
<body data-content="sub;code">
	<header>
		<menu class="navigation">
            <li><a href="https://tesarek.me">Home</a></li>
            <li><a href="https://tesarek.me#publications">Publications</a></li>
            <li><a href="https://tesarek.us4.list-manage.com/subscribe/post?u=db9cdab3c81c5706fb0ede08a&id=44f897bb92" class="external">Subscribe</a></li>
		</menu>
	</header>
	<main>
		<article class="content">
			<header>
				<h1>Crazy Python</h1>
				<p>Over the time I spent with Python, I discovered some weird quirks and funny tricks you can do. Some
					of them are intentionally put in place by our
					<a href="https://www.python.org/dev/peps/pep-0401/" class="external">Benevolent Dictator Emeritus Vacationing Indefinitely from the Language</a>,
					some of them are just a manifestation of how poetic Python is.</p>
			</header>

			<p>If you are looking for <b>useful</b> tips and tricks, these aren't the droids you are looking for.</p>

			<h2>Hello World!</h2>
			<p>Python is very effective language. In fact, it has one of the shortest Hello World! No functions needed.</p>

            <pre><code class="python">import __hello__ # Hello world!</code></pre>

			<h2>Zen of Python</h2>
			<p>Another import trick, that not everybody knows, is Zen of Python.</p>

			<pre><code class="python">import this
# The Zen of Python, by Tim Peters
#
# Beautiful is better than ugly.
# Explicit is better than implicit.
# Simple is better than complex.
# Complex is better than complicated.
# Flat is better than nested.
# Sparse is better than dense.
# Readability counts.
# Special cases aren't special enough to break the rules.
# Although practicality beats purity.
# Errors should never pass silently.
# Unless explicitly silenced.
# In the face of ambiguity, refuse the temptation to guess.
# There should be one-- and preferably only one --obvious way to do it.
# Although that way may not be obvious at first unless you're Dutch.
# Now is better than never.
# Although never is often better than *right* now.
# If the implementation is hard to explain, it's a bad idea.
# If the implementation is easy to explain, it may be a good idea.
# Namespaces are one honking great idea -- let's do more of those!</code></pre>

			<p>If only more programmers lived by it.</p>

			<h2>Antigravity</h2>
			<p>Python comes with Batteries Included<sup>&copy;</sup>. It just makes sense it also includes antigravity
				module.</p>

			<pre><code class="python">import antigravity</code></pre>
			<img src="https://imgs.xkcd.com/comics/python.png" title="Python Antigravity module" alt="Comic strip XKCD about Python antigravity module">

			<h2>Braces</h2>
			<p>If you don't like Python's syntax using whitespaces to denotate scopes, you can use curly brackets just
				like in C or Java. All you have to do, is import braces.</p>

			<pre><code class="python">from __future__ import braces</code></pre>

			<h2>Swapping variables</h2>
			<p>If you know Java, you probably encountered an exercise to swap two integer values using only one line of
				code. This is one possible solution.</p>
			
			<pre><code class="java">int x = 100;
int y = 19;
x = x ^ y ^ (y = x);</code></pre>

			<p>In Python you can do this much easier and with any variable type (and less semicolons).</p>
			
			<pre><code class="python">x = 100
y = 19
x, y = y, x
# x: 19, y: 100</code></pre>

			<h2>Reversing a list</h2>
			<p>This is a well known trick and it's probably one of the first thing someone told when they tried to
				convince you Python is the best language in the world. Reversing a <code class="python">list</code> or
				a <code class="python">string</code> in Python is super simple.</p>
			
			<pre><code class="python">s = 'Hello World!'
s[::-1]
# '!dlroW olleH'</code></pre>

			<h2>Copying a list</h2>
			<p>As we saw, list slicing is very powerful. Another thing we can use it for is creating a shallow copy of
				a list.</p>

			<pre><code class="python">l = [1, 2, 3]
c = l[:]
c.append(4)
# l: [1, 2, 3]
# c: [1, 2, 3, 4]</code></pre>

			<h2>Thousands separator</h2>
			<p>Reading long number literals can be tricky as you have to make sure you didn't miss any decimal. In
				Python you can make it easier for yourself and separate thousands with an underscore.</p>

			<pre><code class="python">seconds_in_year = 31_536_000 # same as 31536000</code></pre>			

			<h2>Literal attributes</h2>
			<p>As I explained in the article
				<a href="/articles/power-of-metaclasses">Power of metaclasses</a>, everything is an
				object. That means you can access attributes and methods of any variable or literal, even strings and
				integers, using dot syntax.</p>
			
			<pre><code class="python">"string".upper() # STRING</code></pre>

			<p>But with integers Python thinks you are using dot as a decimal separator, so you have to use a little
				trick.</p>
			
			<pre><code class="python">(42).__add__(5) # 47</code></pre>

			<h2>Boolean is an integer</h2>
			<p><code class="python">Bool</code> type inherits from <code class="python">int</code> which can sometimes
				lead to weird bugs.</p>

			<pre><code class="python">isinstance(False, int) #True
5 + True # 6</code></pre>

			<h2>Caching of integers</h2>
			<p>Speaking of integers, Python caches some integer values. The range changes between versions, but usually
				values between -5 a 256 are cached, values over 1000 are not cached.</p>

			<pre><code class="python">(2 + 5) is 7 # True
(1000 + 1) is 1001 # False</code></pre>

			<h2>Interval comparison</h2>
			<p>Great feature, that I miss in other languages, is an interval comparison. You can test if a value is
				within an interval using single expression.</p>

			<pre><code class="python">1 &lt;= variable &lt;= 100 # True if value is between 1 and 100</code></pre>

			<h2>Metaclasses</h2>
			<p>Metaclasses are a huge topic which I explain thoroughly in article
				<a href="/articles/power-of-metaclasses">Power of metaclasses</a>. It's very easy to
				abuse. For example, many programmers struggle with inheritance; they're not sure in which order methods
				are imported from parent classes. Why not make it easier for them and sort the inheritance tree 
				alphabetically?</p>

			<pre><code class="python">class Library(type):
	def mro(cls):
		return sorted(
			super().mro(),
			key=lambda cls: cls.__name__
		)

class AClass(metaclass=Library):
	def hello(self):
		print('hello', 'A')

class BClass(AClass):
	def hello(self):
		print('hello', 'B')

class CClass(BClass):
	def hello(self):
		print('hello', 'C')

print(CClass.mro())
# [&lt;class '__main__.AClass'&gt;,
#  &lt;class '__main__.BClass'&gt;,
#  &lt;class '__main__.CClass'&gt;,
#  &lt;class 'object'&gt;]
CClass().hello() #hello A</code></pre>

			<h2>Try/Except/Finally/Else</h2>
			<p>Even if you came to Python from different language, like me, you probably know about the optional
				<code class="python">else</code> clause for loops.</p>

			<pre><code class="python">for i in get_list():
	print(i)
else:
	print("no iterations")</code></pre>

			<p>But you might not have know that you can use <code class="python">else</code> also in exception
			handling.</p>

			<pre><code class="python">try:
	print('executed first')
except:
	print('executed when exception happens')
else:
	print('executed when no exception happens')
finally:
	print('always executed at the end')</code></pre>

			<h2>Boolean operators</h2>
			<p>Almost all beginner tutorials on conditions explain boolean operators something like this:</p>

			<blockquote>
				The expression <code class="python">A and B</code> is <code class="python">True</code> if both
				<code class="python">A</code> is <code class="python">True</code> and <code class="python">B</code> is
				<code class="python">True</code>, and <code class="python">False</code> if either is
				<code class="python">False</code>.
				<cite><a href="https://cscircles.cemc.uwaterloo.ca/9-else-and-or-not/" class="external">Computer Science Circles</a></cite>
			</blockquote>

			<p>It's nice, simple and absolutely wrong explanation. Result of boolean operations in Python is not a
				boolean but <code class="python">False</code> or one of the operands.</p>

			<pre><code class="python">result = 2 &lt; 1 and 'string'
print(result) # string
# Result of "and" operand is the last value</code></pre>

			<pre><code class="python">result = [1, 2] or 2 &lt; 1
print(result) # [1, 2]
# Result of "or" operand is the first value that evaluates to True</code></pre>

			<h2>Returning from finally</h2>
			<p>I wrote an <a href="/articles/try-finally-experiments">extensive article about
				returning from <code class="python">finally</code></a> before but it's still worth mentioning here.
				Code in <code class="python">finally</code> is always executed, even if you already returned from your
				function. If you then return again from the <code class="python">finally</code> block, it rewrites the
				original value.</p>

			<pre><code class="python">def test():
	try:
		return 'try'
	finally:
		return 'finally'

print(test()) # finally</code></pre>

			<p>That's enough craziness for today. If you have your own favorite crazy tricks in Python, send them to me
				using one of the links in the footer and I'll add them to the list.</p>

			<aside>
				<p>Did you find an issue with this article? Please
					<a href="https://github.com/JakubTesarek/tesarek.me/issues/new" class="external">file a bug report</a> or even
					better, <a href="https://github.com/JakubTesarek/tesarek.me/edit/master/articles/crazy-python.html" class="external">send a pull request</a>.
					Thank you!</p>
			</aside>
		</article>
	</main>
	<footer>
		<section>
			<a class="icon" href="mailto:jakub@tesarek.me">&#xf0e0;</a>
			<a class="icon external" href="https://www.instagram.com/tesarekjakub/">&#xf16d;</a>
			<a class="icon external" href="https://github.com/JakubTesarek">&#xf300;</a>
			<a class="icon external" href="https://www.linkedin.com/in/jakubtesarek/">&#xf30c;</a>
			<a class="icon external" href="https://twitter.com/JakubTesarek">&#xf304;</a>
		</section>
	</footer>
</body>
</html>
